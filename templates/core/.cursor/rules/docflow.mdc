⸻

description: “Docflow — Cursor Rules”
globs:
include:
- “docflow/”
- “templates/”
- “.cursor/**”
alwaysApply: true

Docflow Rules (Operation-Based)

Purpose

Standardize edits and responses so the doc-driven workflow is coherent for humans and agents.

Scope

Only read/write inside these roots by default:
- docflow/**
- templates/**
- .cursor/**

Vocabulary
- Status: pending → in_progress → in_review → completed
- IDs: F### feature, C### chore, B### bug, S### spike, ADR-YYYY-MM-DD-NN-slug
- Iterations: docflow/iterations/current/ and numbered archives (01, 02, …)

File Priority (when summarizing)
1. docflow/iterations/current/index.md
2. docflow/iterations/current/features.md
3. docflow/active/focus.md
4. docflow/active/session.md
5. docflow/project/*
6. docflow/decisions/*

Allowed Operations (no command coupling)
- Discover: Summarize current goal, top priorities, blockers.
- Capture: Append a note to docflow/notes/YYYY-MM-DD.md.
- Plan: Add or update items in iterations/current/features.md or backlog/features.md.
- Focus: Set one item as active (update active/focus.md + mark in_progress).
- Promote: Create per-item file (e.g., items/F123-slug.md) and add promoted: true + file: in worklist entry.
- Decide: Create ADR file and index entry.
- Handoff: Append to active/session.md with accomplished/next/blockers.
- Iterate: Bootstrap or archive an iteration (current → NN).

Edit Rules
- Preserve YAML front-matter and tokens like “{{PROJECT_NAME}}”.
- Use the canonical status values.
- Never delete ADR history; supersede with a new ADR if changed.
- Notes are append-only for a given day file.
- If a target file is missing, create it with minimal valid front-matter.

Response Shapes

Success
- One sentence summary
- Paths touched (bulleted)
- Next actions (1–3 bullets)

Failure
- What failed (one sentence)
- Likely cause(s) (bulleted)
- Exact next step

Safety
- Do not modify files outside Scope.
- Do not write binary content.
- Prefer small diffs; avoid mass rewrites unless explicitly requested.

ACCEPTANCE
- Project docs have the “Stack Standards” section once each (if previously missing).
- Next.js + Convex README exists.
- rules/docflow.mdc replaced with the operation-based content above.
- No other files changed.

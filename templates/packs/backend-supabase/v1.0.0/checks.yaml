schema: checks.v1
id: backend-supabase-checks
version: 1
checks:
  - id: migrations-dir
    title: supabase/migrations present
    severity: error
    applies_to: [supabase/migrations]
    description: Use SQL migrations to manage schema.
    fix: false
  - id: policies-dir
    title: supabase/policies present
    severity: warn
    applies_to: [supabase/policies]
    description: Maintain RLS policies as code.
    fix: false
  - id: client-factory
    title: src/lib/supabase.ts present
    severity: warn
    applies_to: [src/lib/supabase.ts]
    description: Centralize Supabase client creation; separate server/client usage.
    fix: false
  - id: no-admin-keys-client
    title: No admin keys in client bundles
    severity: error
    applies_to: [app/**, src/**]
    description: Ensure service-role/admin keys are server-only.
    fix: false
